<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>AvalKural</title>

<style>
/* =========================================================
   AVALKURAL â€“ BLUE + LAVENDER NEON THEME
========================================================= */
*{box-sizing:border-box}
body{
 margin:0;
 background:#0a0d18;
 color:#fff;
 font-family:'Segoe UI',system-ui;
}

/* LAYOUT */
#app{display:flex;height:100vh}

/* ===== LEFT PLAYLIST ===== */
#left{
 width:330px;
 background:#0e1122;
 border-right:1px solid #1d2540;
 overflow:auto;
}

#brand{
 padding:20px;
 font-size:26px;
 font-weight:bold;
 letter-spacing:2px;
 background:linear-gradient(90deg,#6ac6ff,#b084ff);
 -webkit-background-clip:text;
 -webkit-text-fill-color:transparent;
 text-align:center;
}

.ak-song{
 display:flex;
 gap:12px;
 padding:12px;
 cursor:pointer;
 border-bottom:1px solid #161c33;
 transition:.2s;
}

.ak-song:hover{
 background:#131a30;
 box-shadow:inset 0 0 14px #4da3ff44;
}

.ak-song img{
 width:48px;
 height:48px;
 border-radius:8px;
 object-fit:cover;
}

.ak-name{font-size:14px}
.ak-sub{font-size:11px;color:#aaa}

/* ===== MAIN AREA ===== */
#main{
 flex:1;
 display:flex;
 flex-direction:column;
 align-items:center;
 justify-content:center;
 position:relative;
 text-align:center;
}

#cover{
 width:260px;
 height:260px;
 border-radius:16px;
 object-fit:cover;
 box-shadow:0 0 40px #6ac6ff55;
}

#title{
 margin-top:18px;
 font-size:22px;
}

/* ===== PLAYER ===== */
#player{
 position:absolute;
 bottom:0;
 width:100%;
 background:#0e1122;
 padding:14px;
 border-top:1px solid #1f2b46;
}

#bar{
 height:6px;
 background:#1a1f33;
 border-radius:10px;
 margin:10px 0;
 cursor:pointer;
}

#progress{
 height:100%;
 width:0%;
 background:linear-gradient(90deg,#6ac6ff,#b084ff);
 border-radius:10px;
}

#ctrl{
 display:flex;
 gap:18px;
 justify-content:center;
 flex-wrap:wrap;
}

.btn{
 background:#131a30;
 border:1px solid #2b3558;
 color:#fff;
 padding:8px 14px;
 border-radius:10px;
 cursor:pointer;
 transition:.2s;
}

.btn:hover{
 box-shadow:0 0 12px #6ac6ff55;
}

/* ===== DESCRIPTION POPUP ===== */
#AK_POP{
 position:fixed;
 right:20px;
 bottom:90px;
 background:#0e1122;
 border:1px solid #6ac6ff;
 padding:14px;
 border-radius:12px;
 max-width:300px;
 display:none;
 z-index:9999;
}

/* SCROLL */
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-thumb{background:#6ac6ff}

/* MOBILE */
@media(max-width:768px){
 #app{flex-direction:column}
 #left{width:100%;height:260px}
}
</style>
</head>

<body>

<div id="app">

<!-- ========== LEFT PLAYLIST ========== -->
<div id="left">
 <div id="brand">AvalKural</div>
 <div id="AK_LIST">Loading playlist...</div>
</div>

<!-- ========== MAIN ========== -->
<div id="main">
 <img id="cover" src="author.jpg">
 <div id="title">Select a Song</div>

 <div id="player">
   <div id="bar" onclick="AK.seek(event)">
     <div id="progress"></div>
   </div>

   <div id="ctrl">
     <button class="btn" onclick="AK.prev()">Prev</button>
     <button class="btn" onclick="AK.playPause()">Play / Pause</button>
     <button class="btn" onclick="AK.next()">Next</button>
     <button class="btn" onclick="AK.download()">Download</button>
   </div>
 </div>
</div>

</div>

<div id="AK_POP"></div>
<audio id="AK_AUDIO"></audio>

<script>
/* =========================================================
   AVALKURAL MUSIC ENGINE
========================================================= */
const AK = {
 songs: [],
 i: 0,

 async init(){
   try{
     const r = await fetch('playlist.json');
     this.songs = await r.json();

     if(!this.songs.length){
        AK_LIST.innerHTML="No songs in playlist.json";
        return;
     }

     this.build();
   }catch(e){
     AK_LIST.innerHTML="playlist.json not found";
     console.error(e);
   }
 },

 build(){
  AK_LIST.innerHTML = this.songs.map((s,i)=>`
   <div class="ak-song" data-i="${i}">
     <img src="${s.image||'author.jpg'}">
     <div>
       <div class="ak-name">${s.name}</div>
       <div class="ak-sub">${s.singer||'RIYA'}</div>
     </div>
   </div>`).join("");

  document.querySelectorAll('.ak-song').forEach(e=>{
     e.onclick = ()=> this.open(e.dataset.i);

     // Long press for description
     e.onmousedown = ()=>{
       this.h = setTimeout(()=>{
         this.info(e.dataset.i);
       },700);
     };

     e.onmouseup = ()=> clearTimeout(this.h);
  });
 },

 open(x){
   this.i = parseInt(x);
   const s = this.songs[this.i];

   AK_AUDIO.src = s.file;
   AK_AUDIO.play();

   title.innerHTML = s.name;
   cover.src = s.image || 'author.jpg';
 },

 playPause(){
   if(AK_AUDIO.paused) AK_AUDIO.play();
   else AK_AUDIO.pause();
 },

 next(){
   this.open((this.i+1) % this.songs.length);
 },

 prev(){
   this.open((this.i-1 + this.songs.length) % this.songs.length);
 },

 info(x){
   const s = this.songs[x];
   AK_POP.style.display='block';
   AK_POP.innerHTML =
     "<b>"+s.name+"</b><br><br>"+(s.description||'No description');
 },

 download(){
   const s = this.songs[this.i];
   const a = document.createElement('a');
   a.href = s.file;
   a.download = s.name + ".mp3";
   a.click();
 },

 seek(e){
   const p = e.offsetX / e.target.offsetWidth;
   AK_AUDIO.currentTime = p * AK_AUDIO.duration;
 }
};

AK_AUDIO.ontimeupdate = ()=>{
 progress.style.width =
 (AK_AUDIO.currentTime / AK_AUDIO.duration) * 100 + "%";
};

window.onload = ()=> AK.init();
</script>

</body>
</html>

